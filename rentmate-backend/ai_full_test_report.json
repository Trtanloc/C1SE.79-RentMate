{
  "database_test": {
    "status": "ok",
    "queries_executed": [
      {
        "sql": "PRAGMA foreign_keys = OFF",
        "timestamp": "2025-11-10T04:48:15.693Z"
      },
      {
        "sql": "BEGIN TRANSACTION",
        "timestamp": "2025-11-10T04:48:15.695Z"
      },
      {
        "sql": "SELECT 'DROP VIEW \"' || name || '\";' as query FROM \"sqlite_master\" WHERE \"type\" = 'view'",
        "timestamp": "2025-11-10T04:48:15.695Z"
      },
      {
        "sql": "SELECT 'DROP TABLE \"' || name || '\";' as query FROM \"sqlite_master\" WHERE \"type\" = 'table' AND \"name\" != 'sqlite_sequence'",
        "timestamp": "2025-11-10T04:48:15.696Z"
      },
      {
        "sql": "COMMIT",
        "timestamp": "2025-11-10T04:48:15.696Z"
      },
      {
        "sql": "PRAGMA foreign_keys = ON",
        "timestamp": "2025-11-10T04:48:15.697Z"
      },
      {
        "sql": "PRAGMA foreign_keys = OFF",
        "timestamp": "2025-11-10T04:48:15.697Z"
      },
      {
        "sql": "BEGIN TRANSACTION",
        "timestamp": "2025-11-10T04:48:15.698Z"
      },
      {
        "sql": "SELECT * FROM \"sqlite_master\" WHERE \"type\" = 'table' AND \"name\" IN ('transactions','contracts','notifications','users','properties','messages')",
        "timestamp": "2025-11-10T04:48:15.699Z"
      },
      {
        "sql": "SELECT * FROM \"sqlite_master\" WHERE \"type\" = 'index' AND \"tbl_name\" IN ('transactions','contracts','notifications','users','properties','messages')",
        "timestamp": "2025-11-10T04:48:15.699Z"
      },
      {
        "sql": "SELECT * FROM \"sqlite_master\" WHERE \"type\" = 'table' AND \"name\" = 'typeorm_metadata'",
        "timestamp": "2025-11-10T04:48:15.700Z"
      },
      {
        "sql": "CREATE TABLE \"transactions\" (\"id\" integer PRIMARY KEY AUTOINCREMENT NOT NULL, \"contractId\" integer NOT NULL, \"amount\" numeric(12,2) NOT NULL, \"status\" varchar CHECK( \"status\" IN ('pending','processing','completed','failed','overdue') ) NOT NULL DEFAULT ('pending'), \"description\" varchar(200), \"paidAt\" datetime, \"createdAt\" datetime NOT NULL DEFAULT (datetime('now')))",
        "timestamp": "2025-11-10T04:48:15.702Z"
      },
      {
        "sql": "CREATE TABLE \"contracts\" (\"id\" integer PRIMARY KEY AUTOINCREMENT NOT NULL, \"contractNumber\" varchar(100) NOT NULL, \"propertyId\" integer NOT NULL, \"tenantId\" integer NOT NULL, \"ownerId\" integer NOT NULL, \"status\" varchar CHECK( \"status\" IN ('draft','pending','signed','active','completed','cancelled') ) NOT NULL DEFAULT ('draft'), \"startDate\" date, \"endDate\" date, \"signedAt\" datetime, \"createdAt\" datetime NOT NULL DEFAULT (datetime('now')), \"updatedAt\" datetime NOT NULL DEFAULT (datetime('now')))",
        "timestamp": "2025-11-10T04:48:15.704Z"
      },
      {
        "sql": "CREATE TABLE \"notifications\" (\"id\" integer PRIMARY KEY AUTOINCREMENT NOT NULL, \"userId\" integer NOT NULL, \"title\" varchar(255) NOT NULL, \"message\" text NOT NULL, \"type\" varchar CHECK( \"type\" IN ('transaction','contract','reminder','system') ) NOT NULL, \"isRead\" boolean NOT NULL DEFAULT (0), \"createdAt\" datetime NOT NULL DEFAULT (datetime('now')))",
        "timestamp": "2025-11-10T04:48:15.704Z"
      },
      {
        "sql": "CREATE TABLE \"users\" (\"id\" integer PRIMARY KEY AUTOINCREMENT NOT NULL, \"fullName\" varchar(100) NOT NULL, \"email\" varchar(100) NOT NULL, \"password\" varchar(255) NOT NULL, \"phone\" varchar(20), \"role\" varchar CHECK( \"role\" IN ('tenant','landlord','manager','admin') ) NOT NULL DEFAULT ('tenant'), \"isActive\" boolean NOT NULL DEFAULT (1), \"createdAt\" datetime NOT NULL DEFAULT (datetime('now')), \"updatedAt\" datetime NOT NULL DEFAULT (datetime('now')), CONSTRAINT \"UQ_97672ac88f789774dd47f7c8be3\" UNIQUE (\"email\"))",
        "timestamp": "2025-11-10T04:48:15.705Z"
      },
      {
        "sql": "CREATE TABLE \"properties\" (\"id\" integer PRIMARY KEY AUTOINCREMENT NOT NULL, \"ownerId\" integer NOT NULL, \"title\" varchar(200) NOT NULL, \"description\" text NOT NULL, \"address\" text NOT NULL, \"price\" numeric(12,2) NOT NULL, \"area\" float NOT NULL, \"status\" varchar CHECK( \"status\" IN ('available','rented','pending') ) NOT NULL DEFAULT ('available'), \"createdAt\" datetime NOT NULL DEFAULT (datetime('now')), \"updatedAt\" datetime NOT NULL DEFAULT (datetime('now')))",
        "timestamp": "2025-11-10T04:48:15.706Z"
      },
      {
        "sql": "CREATE TABLE \"messages\" (\"id\" integer PRIMARY KEY AUTOINCREMENT NOT NULL, \"conversationId\" varchar(120) NOT NULL, \"senderId\" integer, \"senderType\" varchar CHECK( \"senderType\" IN ('tenant','owner','assistant','system') ) NOT NULL DEFAULT ('tenant'), \"content\" text NOT NULL, \"mode\" varchar(50), \"createdAt\" datetime NOT NULL DEFAULT (datetime('now')))",
        "timestamp": "2025-11-10T04:48:15.707Z"
      },
      {
        "sql": "CREATE INDEX \"IDX_CONVERSATION_CREATED_AT\" ON \"messages\" (\"conversationId\", \"createdAt\") ",
        "timestamp": "2025-11-10T04:48:15.707Z"
      },
      {
        "sql": "CREATE TABLE \"temporary_transactions\" (\"id\" integer PRIMARY KEY AUTOINCREMENT NOT NULL, \"contractId\" integer NOT NULL, \"amount\" numeric(12,2) NOT NULL, \"status\" varchar CHECK( \"status\" IN ('pending','processing','completed','failed','overdue') ) NOT NULL DEFAULT ('pending'), \"description\" varchar(200), \"paidAt\" datetime, \"createdAt\" datetime NOT NULL DEFAULT (datetime('now')), CONSTRAINT \"FK_3067d42d781cc3f613aa5d68d38\" FOREIGN KEY (\"contractId\") REFERENCES \"contracts\" (\"id\") ON DELETE CASCADE ON UPDATE NO ACTION)",
        "timestamp": "2025-11-10T04:48:15.712Z"
      },
      {
        "sql": "INSERT INTO \"temporary_transactions\"(\"id\", \"contractId\", \"amount\", \"status\", \"description\", \"paidAt\", \"createdAt\") SELECT \"id\", \"contractId\", \"amount\", \"status\", \"description\", \"paidAt\", \"createdAt\" FROM \"transactions\"",
        "timestamp": "2025-11-10T04:48:15.713Z"
      },
      {
        "sql": "DROP TABLE \"transactions\"",
        "timestamp": "2025-11-10T04:48:15.713Z"
      },
      {
        "sql": "ALTER TABLE \"temporary_transactions\" RENAME TO \"transactions\"",
        "timestamp": "2025-11-10T04:48:15.713Z"
      },
      {
        "sql": "CREATE TABLE \"temporary_contracts\" (\"id\" integer PRIMARY KEY AUTOINCREMENT NOT NULL, \"contractNumber\" varchar(100) NOT NULL, \"propertyId\" integer NOT NULL, \"tenantId\" integer NOT NULL, \"ownerId\" integer NOT NULL, \"status\" varchar CHECK( \"status\" IN ('draft','pending','signed','active','completed','cancelled') ) NOT NULL DEFAULT ('draft'), \"startDate\" date, \"endDate\" date, \"signedAt\" datetime, \"createdAt\" datetime NOT NULL DEFAULT (datetime('now')), \"updatedAt\" datetime NOT NULL DEFAULT (datetime('now')), CONSTRAINT \"FK_3d01d6444fe0d4a9e47ac9b3625\" FOREIGN KEY (\"propertyId\") REFERENCES \"properties\" (\"id\") ON DELETE CASCADE ON UPDATE NO ACTION, CONSTRAINT \"FK_4317b3172f8e20198732e698e12\" FOREIGN KEY (\"tenantId\") REFERENCES \"users\" (\"id\") ON DELETE CASCADE ON UPDATE NO ACTION, CONSTRAINT \"FK_83da1c4b4e98a1254703438aa9c\" FOREIGN KEY (\"ownerId\") REFERENCES \"users\" (\"id\") ON DELETE CASCADE ON UPDATE NO ACTION)",
        "timestamp": "2025-11-10T04:48:15.714Z"
      },
      {
        "sql": "INSERT INTO \"temporary_contracts\"(\"id\", \"contractNumber\", \"propertyId\", \"tenantId\", \"ownerId\", \"status\", \"startDate\", \"endDate\", \"signedAt\", \"createdAt\", \"updatedAt\") SELECT \"id\", \"contractNumber\", \"propertyId\", \"tenantId\", \"ownerId\", \"status\", \"startDate\", \"endDate\", \"signedAt\", \"createdAt\", \"updatedAt\" FROM \"contracts\"",
        "timestamp": "2025-11-10T04:48:15.715Z"
      },
      {
        "sql": "DROP TABLE \"contracts\"",
        "timestamp": "2025-11-10T04:48:15.715Z"
      },
      {
        "sql": "ALTER TABLE \"temporary_contracts\" RENAME TO \"contracts\"",
        "timestamp": "2025-11-10T04:48:15.716Z"
      },
      {
        "sql": "CREATE TABLE \"temporary_notifications\" (\"id\" integer PRIMARY KEY AUTOINCREMENT NOT NULL, \"userId\" integer NOT NULL, \"title\" varchar(255) NOT NULL, \"message\" text NOT NULL, \"type\" varchar CHECK( \"type\" IN ('transaction','contract','reminder','system') ) NOT NULL, \"isRead\" boolean NOT NULL DEFAULT (0), \"createdAt\" datetime NOT NULL DEFAULT (datetime('now')), CONSTRAINT \"FK_692a909ee0fa9383e7859f9b406\" FOREIGN KEY (\"userId\") REFERENCES \"users\" (\"id\") ON DELETE CASCADE ON UPDATE NO ACTION)",
        "timestamp": "2025-11-10T04:48:15.717Z"
      },
      {
        "sql": "INSERT INTO \"temporary_notifications\"(\"id\", \"userId\", \"title\", \"message\", \"type\", \"isRead\", \"createdAt\") SELECT \"id\", \"userId\", \"title\", \"message\", \"type\", \"isRead\", \"createdAt\" FROM \"notifications\"",
        "timestamp": "2025-11-10T04:48:15.717Z"
      },
      {
        "sql": "DROP TABLE \"notifications\"",
        "timestamp": "2025-11-10T04:48:15.718Z"
      },
      {
        "sql": "ALTER TABLE \"temporary_notifications\" RENAME TO \"notifications\"",
        "timestamp": "2025-11-10T04:48:15.718Z"
      },
      {
        "sql": "CREATE TABLE \"temporary_properties\" (\"id\" integer PRIMARY KEY AUTOINCREMENT NOT NULL, \"ownerId\" integer NOT NULL, \"title\" varchar(200) NOT NULL, \"description\" text NOT NULL, \"address\" text NOT NULL, \"price\" numeric(12,2) NOT NULL, \"area\" float NOT NULL, \"status\" varchar CHECK( \"status\" IN ('available','rented','pending') ) NOT NULL DEFAULT ('available'), \"createdAt\" datetime NOT NULL DEFAULT (datetime('now')), \"updatedAt\" datetime NOT NULL DEFAULT (datetime('now')), CONSTRAINT \"FK_47b8bfd9c3165b8a53cd0c58df0\" FOREIGN KEY (\"ownerId\") REFERENCES \"users\" (\"id\") ON DELETE CASCADE ON UPDATE NO ACTION)",
        "timestamp": "2025-11-10T04:48:15.719Z"
      },
      {
        "sql": "INSERT INTO \"temporary_properties\"(\"id\", \"ownerId\", \"title\", \"description\", \"address\", \"price\", \"area\", \"status\", \"createdAt\", \"updatedAt\") SELECT \"id\", \"ownerId\", \"title\", \"description\", \"address\", \"price\", \"area\", \"status\", \"createdAt\", \"updatedAt\" FROM \"properties\"",
        "timestamp": "2025-11-10T04:48:15.719Z"
      },
      {
        "sql": "DROP TABLE \"properties\"",
        "timestamp": "2025-11-10T04:48:15.720Z"
      },
      {
        "sql": "ALTER TABLE \"temporary_properties\" RENAME TO \"properties\"",
        "timestamp": "2025-11-10T04:48:15.720Z"
      },
      {
        "sql": "COMMIT",
        "timestamp": "2025-11-10T04:48:15.721Z"
      },
      {
        "sql": "PRAGMA foreign_keys = ON",
        "timestamp": "2025-11-10T04:48:15.721Z"
      },
      {
        "sql": "BEGIN TRANSACTION",
        "timestamp": "2025-11-10T04:48:15.724Z"
      },
      {
        "sql": "INSERT INTO \"users\"(\"id\", \"fullName\", \"email\", \"password\", \"phone\", \"role\", \"isActive\", \"createdAt\", \"updatedAt\") VALUES (NULL, ?, ?, ?, NULL, ?, 1, datetime('now'), datetime('now'))",
        "parameters": [
          "Tien Tran",
          "tenant+r1@rentmate.dev",
          "hashed-tenant",
          "tenant"
        ],
        "timestamp": "2025-11-10T04:48:15.729Z"
      },
      {
        "sql": "SELECT \"User\".\"id\" AS \"User_id\", \"User\".\"role\" AS \"User_role\", \"User\".\"isActive\" AS \"User_isActive\", \"User\".\"createdAt\" AS \"User_createdAt\", \"User\".\"updatedAt\" AS \"User_updatedAt\" FROM \"users\" \"User\" WHERE \"User\".\"id\" = 1",
        "parameters": [],
        "timestamp": "2025-11-10T04:48:15.735Z"
      },
      {
        "sql": "COMMIT",
        "timestamp": "2025-11-10T04:48:15.738Z"
      },
      {
        "sql": "BEGIN TRANSACTION",
        "timestamp": "2025-11-10T04:48:15.739Z"
      },
      {
        "sql": "INSERT INTO \"users\"(\"id\", \"fullName\", \"email\", \"password\", \"phone\", \"role\", \"isActive\", \"createdAt\", \"updatedAt\") VALUES (NULL, ?, ?, ?, NULL, ?, 1, datetime('now'), datetime('now'))",
        "parameters": [
          "Lan Nguyen",
          "owner+r1@rentmate.dev",
          "hashed-owner",
          "landlord"
        ],
        "timestamp": "2025-11-10T04:48:15.739Z"
      },
      {
        "sql": "SELECT \"User\".\"id\" AS \"User_id\", \"User\".\"role\" AS \"User_role\", \"User\".\"isActive\" AS \"User_isActive\", \"User\".\"createdAt\" AS \"User_createdAt\", \"User\".\"updatedAt\" AS \"User_updatedAt\" FROM \"users\" \"User\" WHERE \"User\".\"id\" = 2",
        "parameters": [],
        "timestamp": "2025-11-10T04:48:15.740Z"
      },
      {
        "sql": "COMMIT",
        "timestamp": "2025-11-10T04:48:15.740Z"
      },
      {
        "sql": "BEGIN TRANSACTION",
        "timestamp": "2025-11-10T04:48:15.741Z"
      },
      {
        "sql": "INSERT INTO \"properties\"(\"id\", \"ownerId\", \"title\", \"description\", \"address\", \"price\", \"area\", \"status\", \"createdAt\", \"updatedAt\") VALUES (NULL, 2, ?, ?, ?, 8500000, 68, ?, datetime('now'), datetime('now'))",
        "parameters": [
          "Riverside Skyline Apartment",
          "High floor apartment with full amenities near Han River.",
          "35 Bach Dang, Da Nang",
          "available"
        ],
        "timestamp": "2025-11-10T04:48:15.742Z"
      },
      {
        "sql": "SELECT \"Property\".\"id\" AS \"Property_id\", \"Property\".\"status\" AS \"Property_status\", \"Property\".\"createdAt\" AS \"Property_createdAt\", \"Property\".\"updatedAt\" AS \"Property_updatedAt\" FROM \"properties\" \"Property\" WHERE \"Property\".\"id\" = 1",
        "parameters": [],
        "timestamp": "2025-11-10T04:48:15.742Z"
      },
      {
        "sql": "INSERT INTO \"properties\"(\"id\", \"ownerId\", \"title\", \"description\", \"address\", \"price\", \"area\", \"status\", \"createdAt\", \"updatedAt\") VALUES (NULL, 2, ?, ?, ?, 6200000, 40, ?, datetime('now'), datetime('now'))",
        "parameters": [
          "Cozy Studio Near Dragon Bridge",
          "Compact studio with AC + Wifi, ready to move in.",
          "24 Tran Hung Dao, Da Nang",
          "available"
        ],
        "timestamp": "2025-11-10T04:48:15.742Z"
      },
      {
        "sql": "SELECT \"Property\".\"id\" AS \"Property_id\", \"Property\".\"status\" AS \"Property_status\", \"Property\".\"createdAt\" AS \"Property_createdAt\", \"Property\".\"updatedAt\" AS \"Property_updatedAt\" FROM \"properties\" \"Property\" WHERE \"Property\".\"id\" = 2",
        "parameters": [],
        "timestamp": "2025-11-10T04:48:15.743Z"
      },
      {
        "sql": "INSERT INTO \"properties\"(\"id\", \"ownerId\", \"title\", \"description\", \"address\", \"price\", \"area\", \"status\", \"createdAt\", \"updatedAt\") VALUES (NULL, 2, ?, ?, ?, 15000000, 80, ?, datetime('now'), datetime('now'))",
        "parameters": [
          "Saigon Central Loft",
          "Premium loft in District 1, Ho Chi Minh City.",
          "12 Nguyen Hue, Ho Chi Minh City",
          "available"
        ],
        "timestamp": "2025-11-10T04:48:15.743Z"
      },
      {
        "sql": "SELECT \"Property\".\"id\" AS \"Property_id\", \"Property\".\"status\" AS \"Property_status\", \"Property\".\"createdAt\" AS \"Property_createdAt\", \"Property\".\"updatedAt\" AS \"Property_updatedAt\" FROM \"properties\" \"Property\" WHERE \"Property\".\"id\" = 3",
        "parameters": [],
        "timestamp": "2025-11-10T04:48:15.743Z"
      },
      {
        "sql": "COMMIT",
        "timestamp": "2025-11-10T04:48:15.744Z"
      },
      {
        "sql": "BEGIN TRANSACTION",
        "timestamp": "2025-11-10T04:48:15.744Z"
      },
      {
        "sql": "INSERT INTO \"contracts\"(\"id\", \"contractNumber\", \"propertyId\", \"tenantId\", \"ownerId\", \"status\", \"startDate\", \"endDate\", \"signedAt\", \"createdAt\", \"updatedAt\") VALUES (NULL, ?, 1, 1, 2, ?, ?, ?, ?, datetime('now'), datetime('now'))",
        "parameters": [
          "RM-2025-0001",
          "active",
          "2025-01-01",
          "2025-12-31",
          "2025-01-02 00:00:00.000"
        ],
        "timestamp": "2025-11-10T04:48:15.744Z"
      },
      {
        "sql": "SELECT \"Contract\".\"id\" AS \"Contract_id\", \"Contract\".\"status\" AS \"Contract_status\", \"Contract\".\"createdAt\" AS \"Contract_createdAt\", \"Contract\".\"updatedAt\" AS \"Contract_updatedAt\" FROM \"contracts\" \"Contract\" WHERE \"Contract\".\"id\" = 1",
        "parameters": [],
        "timestamp": "2025-11-10T04:48:15.745Z"
      },
      {
        "sql": "COMMIT",
        "timestamp": "2025-11-10T04:48:15.745Z"
      },
      {
        "sql": "BEGIN TRANSACTION",
        "timestamp": "2025-11-10T04:48:15.745Z"
      },
      {
        "sql": "INSERT INTO \"transactions\"(\"id\", \"contractId\", \"amount\", \"status\", \"description\", \"paidAt\", \"createdAt\") VALUES (NULL, 1, 8500000, ?, ?, ?, datetime('now'))",
        "parameters": [
          "completed",
          "Monthly rent",
          "2025-02-05 10:00:00.000"
        ],
        "timestamp": "2025-11-10T04:48:15.746Z"
      },
      {
        "sql": "SELECT \"Transaction\".\"id\" AS \"Transaction_id\", \"Transaction\".\"status\" AS \"Transaction_status\", \"Transaction\".\"createdAt\" AS \"Transaction_createdAt\" FROM \"transactions\" \"Transaction\" WHERE \"Transaction\".\"id\" = 1",
        "parameters": [],
        "timestamp": "2025-11-10T04:48:15.746Z"
      },
      {
        "sql": "COMMIT",
        "timestamp": "2025-11-10T04:48:15.746Z"
      },
      {
        "sql": "BEGIN TRANSACTION",
        "timestamp": "2025-11-10T04:48:15.748Z"
      },
      {
        "sql": "INSERT INTO \"messages\"(\"id\", \"conversationId\", \"senderId\", \"senderType\", \"content\", \"mode\", \"createdAt\") VALUES (NULL, ?, 1, ?, ?, ?, datetime('now'))",
        "parameters": [
          "tenant-1",
          "tenant",
          "Hello RentMate assistant, I am looking for an Apartment in Da Nang. My budget is up to 10 million VND per month and I need amenities AC, Wifi. Please recommend options that match these filters.",
          "assistant"
        ],
        "timestamp": "2025-11-10T04:48:15.749Z"
      },
      {
        "sql": "SELECT \"Message\".\"id\" AS \"Message_id\", \"Message\".\"senderType\" AS \"Message_senderType\", \"Message\".\"createdAt\" AS \"Message_createdAt\" FROM \"messages\" \"Message\" WHERE \"Message\".\"id\" = 1",
        "parameters": [],
        "timestamp": "2025-11-10T04:48:15.749Z"
      },
      {
        "sql": "COMMIT",
        "timestamp": "2025-11-10T04:48:15.749Z"
      },
      {
        "sql": "SELECT \"property\".\"id\" AS \"property_id\", \"property\".\"ownerId\" AS \"property_ownerId\", \"property\".\"title\" AS \"property_title\", \"property\".\"description\" AS \"property_description\", \"property\".\"address\" AS \"property_address\", \"property\".\"price\" AS \"property_price\", \"property\".\"area\" AS \"property_area\", \"property\".\"status\" AS \"property_status\", \"property\".\"createdAt\" AS \"property_createdAt\", \"property\".\"updatedAt\" AS \"property_updatedAt\", \"owner\".\"id\" AS \"owner_id\", \"owner\".\"fullName\" AS \"owner_fullName\", \"owner\".\"email\" AS \"owner_email\", \"owner\".\"password\" AS \"owner_password\", \"owner\".\"phone\" AS \"owner_phone\", \"owner\".\"role\" AS \"owner_role\", \"owner\".\"isActive\" AS \"owner_isActive\", \"owner\".\"createdAt\" AS \"owner_createdAt\", \"owner\".\"updatedAt\" AS \"owner_updatedAt\" FROM \"properties\" \"property\" LEFT JOIN \"users\" \"owner\" ON \"owner\".\"id\"=\"property\".\"ownerId\" WHERE \"property\".\"status\" = ? AND \"property\".\"price\" <= 10000000 AND (\"property\".\"address\" LIKE ? OR \"property\".\"title\" LIKE ?) ORDER BY \"property\".\"price\" ASC LIMIT 3",
        "parameters": [
          "available",
          "%Da Nang%",
          "%Da Nang%"
        ],
        "timestamp": "2025-11-10T04:48:15.752Z"
      },
      {
        "sql": "BEGIN TRANSACTION",
        "timestamp": "2025-11-10T04:48:15.792Z"
      },
      {
        "sql": "INSERT INTO \"messages\"(\"id\", \"conversationId\", \"senderId\", \"senderType\", \"content\", \"mode\", \"createdAt\") VALUES (NULL, ?, NULL, ?, ?, ?, datetime('now'))",
        "parameters": [
          "tenant-1",
          "assistant",
          "Đây là kết quả xếp hạng AHP/TOPSIS với 2 đề xuất từ cơ sở dữ liệu.",
          "assistant"
        ],
        "timestamp": "2025-11-10T04:48:15.794Z"
      },
      {
        "sql": "SELECT \"Message\".\"id\" AS \"Message_id\", \"Message\".\"senderType\" AS \"Message_senderType\", \"Message\".\"createdAt\" AS \"Message_createdAt\" FROM \"messages\" \"Message\" WHERE \"Message\".\"id\" = 2",
        "parameters": [],
        "timestamp": "2025-11-10T04:48:15.795Z"
      },
      {
        "sql": "COMMIT",
        "timestamp": "2025-11-10T04:48:15.796Z"
      },
      {
        "sql": "SELECT \"property\".\"id\" AS \"property_id\", \"property\".\"ownerId\" AS \"property_ownerId\", \"property\".\"title\" AS \"property_title\", \"property\".\"description\" AS \"property_description\", \"property\".\"address\" AS \"property_address\", \"property\".\"price\" AS \"property_price\", \"property\".\"area\" AS \"property_area\", \"property\".\"status\" AS \"property_status\", \"property\".\"createdAt\" AS \"property_createdAt\", \"property\".\"updatedAt\" AS \"property_updatedAt\", \"owner\".\"id\" AS \"owner_id\", \"owner\".\"fullName\" AS \"owner_fullName\", \"owner\".\"email\" AS \"owner_email\", \"owner\".\"password\" AS \"owner_password\", \"owner\".\"phone\" AS \"owner_phone\", \"owner\".\"role\" AS \"owner_role\", \"owner\".\"isActive\" AS \"owner_isActive\", \"owner\".\"createdAt\" AS \"owner_createdAt\", \"owner\".\"updatedAt\" AS \"owner_updatedAt\" FROM \"properties\" \"property\" LEFT JOIN \"users\" \"owner\" ON \"owner\".\"id\"=\"property\".\"ownerId\" WHERE \"property\".\"status\" = ? AND \"property\".\"price\" <= 10000000 AND (\"property\".\"address\" LIKE ? OR \"property\".\"title\" LIKE ?) ORDER BY \"property\".\"price\" ASC LIMIT 3",
        "parameters": [
          "available",
          "%Da Nang%",
          "%Da Nang%"
        ],
        "timestamp": "2025-11-10T04:48:15.797Z"
      }
    ],
    "records": {
      "properties": 2,
      "contracts": 1,
      "transactions": 1
    },
    "context_sections": [
      "Gợi ý bất động sản từ cơ sở dữ liệu:\n• Cozy Studio Near Dragon Bridge (24 Tran Hung Dao, Da Nang) – 6.200.000 ₫/tháng, chủ nhà: Lan Nguyen\n• Riverside Skyline Apartment (35 Bach Dang, Da Nang) – 8.500.000 ₫/tháng, chủ nhà: Lan Nguyen"
    ]
  },
  "gemini_api_test": {
    "called": true,
    "http_status": 200,
    "response_preview": "Đây là kết quả xếp hạng AHP/TOPSIS với 2 đề xuất từ cơ sở dữ liệu."
  },
  "logic_test": {
    "ranking_valid": true,
    "recommendations": [
      {
        "line": "Cozy Studio Near Dragon Bridge (24 Tran Hung Dao, Da Nang) – 6.200.000 ₫/tháng, chủ nhà: Lan Nguyen",
        "title": "Cozy Studio Near Dragon Bridge",
        "existsInDb": true,
        "price": 6200000
      },
      {
        "line": "Riverside Skyline Apartment (35 Bach Dang, Da Nang) – 8.500.000 ₫/tháng, chủ nhà: Lan Nguyen",
        "title": "Riverside Skyline Apartment",
        "existsInDb": true,
        "price": 8500000
      }
    ],
    "issues": []
  },
  "performance_metrics": {
    "total_time_ms": 48.11,
    "db_time_ms": 11.98,
    "api_time_ms": 35.88,
    "timestamp": "2025-11-10T04:48:15.799Z"
  }
}